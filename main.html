<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <style>
            * {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }
            body {
                background: transparent;
                overflow: hidden;
            }
        </style>
        <script src="./dist/svgmotion.web.js"></script>
        <script type="module">
            // let root = svgmotion.root();
            // let rect = root.add_rect();
            // let svg = root.as_svg(document);
            // console.log(Object.entries(rect));
            // document.body.appendChild(svg);
            // root.update_node(0);
            const {
                Size,
                animate,
                OpacityProp,
                NVectorValue,
                Track,
                To,
                Seq,
                Par,
                Step,
            } = svgmotion;

            let root = svgmotion.root();
            let r = root.add_rect();
            console.info(animate);
            r.position = new NVectorValue([10, 10]);
            let tr = new Track();

            tr.feed(
                Par(
                    Seq(
                        To([r.size], new Size(50, 50)),
                        To([r.size], new Size(100, 100)),
                        To([r.size], new Size(10, 10))
                    ),
                    Step(
                        [
                            { A: 0.25, t: 0, B: [50, 50], C: [0.9, 0.1, 0.9] },
                            { A: 0.9, dur: 1, B: [0, 50], C: [1, 1, 0] },
                            { A: 0.25, dur: 1, B: [50, 0], C: [0, 1, 0] },
                            { A: 0.9, dur: 1, B: [0, 0], C: [0, 0, 0] },
                            { A: 0.25, dur: 1, B: null, C: [0.5, 0.5, 0.5] },
                        ],
                        { X: r.opacity, B: r.position, C: r.fill.color }
                    )
                )
            );

            console.log(root);
            let svg = root.as_svg(document);
            document.body.appendChild(svg);

            animate(root, 60);
        </script>
    </head>
    <body></body>
</html>
